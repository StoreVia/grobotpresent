"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stealEmoji=void 0;const discord_js_1=require("discord.js"),misc_1=require("../misc"),error_1=require("../error");
// ------------------------------
// ------ F U N C T I O N -------
// ------------------------------
/**
 * ## _~stealEmoji~_
 * How cool is **stealing an emoji** from another server ? Feel the power with this function
 *
 * @deprecated **Removed from the package**
 *
 * @param {ExtendedMessage|ExtendedInteraction} msgOrint [`ExtendedMessage`](https://simplyd.js.org/docs/typedef/extendedmessage) | [`ExtendedInteraction`](https://simplyd.js.org/docs/typedef/extendedinteraction)
 * @param {stealOptions} options [`stealOptions`](https://simplyd.js.org/docs/deprecated/stealEmoji#stealOptions)
 *
 * ---
 *
 * @link [`Documentation`](https://simplyd.js.org/docs/deprecated/stealEmoji)
 * @example simplydjs.stealEmoji(interaction)
 */
async function stealEmoji(msgOrint,options={strict:!1}){return(0,error_1.Deprecated)({desc:"Removed stealEmoji() from the package. Please use other package or our code in github."}),new Promise(async()=>{try{let o;if(msgOrint.commandId){if((o=msgOrint).deferred||await o.deferReply({fetchReply:!0}),!o.member.permissions.has(discord_js_1.PermissionFlagsBits.ManageGuildExpressions))return o.followUp({content:"You Must Have • Manage Guild Expressions (Manage Emojis and Stickers) Permission",ephemeral:!0})}else if(!msgOrint.member.permissions.has(discord_js_1.PermissionFlagsBits.ManageGuildExpressions))return msgOrint.channel.send({content:"You Must Have • Manage Guild Expressions (Manage Emojis and Stickers) Permission"});const r=msgOrint,a=msgOrint;let e,i,s;var t;async function n(msg){if(msg.startsWith("http"))msgOrint.guild.emojis.create({reason:"Stole an emoji using a bot.",attachment:i,name:s}).then(async emoji=>{emoji=(new discord_js_1.EmbedBuilder).setTitle((options.embed?.title||"Successfully added the emoji.\n\nEmoji Name: `{name}`\nEmoji ID: `{id}`").replaceAll("{name}",emoji.name).replaceAll("{id}",emoji.id).replaceAll("{url}",emoji.url)).setThumbnail(emoji.url).setColor(options.embed?.color||(0,misc_1.toRgb)("#406DBC")).setFooter(options.embed?.footer||{text:"©️ Rahuletto. npm i simply-djs",iconURL:"https://i.imgur.com/XFUIwPh.png"});options?.embed?.fields&&emoji.setFields(options.embed?.fields),options?.embed?.author&&emoji.setAuthor(options.embed?.author),options?.embed?.image&&emoji.setImage(options.embed?.image),options?.embed?.thumbnail&&emoji.setThumbnail(options.embed?.thumbnail),options?.embed?.timestamp&&emoji.setTimestamp(options.embed?.timestamp),options?.embed?.title&&emoji.setTitle(options.embed?.title),options?.embed?.url&&emoji.setURL(options.embed?.url),o?await r.followUp({content:"Added the emoji :+1:",embeds:[emoji],ephemeral:!0}):o||await a.reply({content:"Added the emoji :+1:",embeds:[emoji]})}).catch(err=>{if(options?.strict)throw new error_1.SimplyError({function:"stealEmoji",title:"An Error occured when running the function ",tip:err.stack});console.log("SimplyError - stealEmoji | Error: "+err.stack)});else{var e=/<:.+:(\d+)>/gm,t=/<a:.+:(\d+)>/gm,msg=msg.match(/<a?:.+:\d+>/gm);const i=e.exec(msg.toString());e=t.exec(msg.toString()),t="https://cdn.discordapp.com/emojis/"+i[1]+(i&&!e?".png?v=1":".gif?v=1");msgOrint.guild.emojis.create({reason:"Stole an emoji using a bot.",attachment:t,name:s}).then(async emoji=>{emoji=(new discord_js_1.EmbedBuilder).setTitle((options.embed?.title||"Successfully added the emoji.\n\nEmoji Name: `{name}`\nEmoji ID: `{id}`").replaceAll("{name}",emoji.name).replaceAll("{id}",emoji.id).replaceAll("{url}",emoji.url)).setThumbnail(emoji.url).setColor(options.embed?.color||(0,misc_1.toRgb)("#406DBC")).setFooter(options.embed?.footer||{text:"©️ Rahuletto. npm i simply-djs",iconURL:"https://i.imgur.com/XFUIwPh.png"});options?.embed?.author&&emoji.setAuthor(options.embed?.author),options?.embed?.image&&emoji.setImage(options.embed?.image),options?.embed?.thumbnail&&emoji.setThumbnail(options.embed?.thumbnail),options?.embed?.timestamp&&emoji.setTimestamp(options.embed?.timestamp),options?.embed?.title&&emoji.setTitle(options.embed?.title),options?.embed?.url&&emoji.setURL(options.embed?.url),options?.embed?.fields&&emoji.setFields(options.embed?.fields),o?await r.followUp({content:"Added the emoji :+1:",embeds:[emoji],ephemeral:!0}):o||await a.reply({content:"Added the emoji :+1:",embeds:[emoji]})}).catch(err=>{if(options?.strict)throw new error_1.SimplyError({function:"stealEmoji",title:"An Error occured when running the function ",tip:err.stack});console.log("SimplyError - stealEmoji | Error: "+err.stack)})}}o?(s=options?.name||String(r.options.get("name").value)||"emojiURL",(i=options?.emoji||String(r.options.get("emoji").value))?n(i):(r.followUp({content:"Send an Image URL/Attachment (Image file)/Emoji to steal [Collecting]"}),o.channel.createMessageCollector({filter:msg=>msg.author.id===r.member.user.id,max:1,time:(0,misc_1.ms)("20s")}).on("collect",async m=>{0!=m.attachments.size?(e=m.attachments.first(),i=m.attachments.first().url):m.content.match(/https/gi)?i=m.content:m.content.replace("<:","").replace("<a:","").match(/(:)([^:\s]+)(:)/gi)&&(i=m.content.replace("<:","").replace("<a:","").match(/(:)([^:\s]+)(:)/gi)[1]),n(i)}))):o||([...t]=a.content.split(/ +/g),e=a.attachments?.first(),s=options?.name||t[2]||"emojiURL",(i=options?.emoji||e?.url||t[1])&&null!=i?n(i):(a.reply({content:"Send an Image URL/Attachment (Image file)/Emoji to steal [Collecting]"}),msgOrint.channel.createMessageCollector({filter:msg=>msg.author.id===a.author.id,max:1,time:(0,misc_1.ms)("20s")}).on("collect",async m=>{0!=m.attachments.size?(e=m.attachments.first(),i=m.attachments.first().url):m.content.match(/https/gi)?i=m.content:m.content.replace("<:","").replace("<a:","").match(/(:)([^:\s]+)(:)/gi)&&(i=m.content.replace("<:","").replace("<a:","").match(/(:)([^:\s]+)(:)/gi)[1]),n(i)})))}catch(e){if(options?.strict)throw new error_1.SimplyError({function:"stealEmoji",title:"An Error occured when running the function ",tip:e.stack});console.log("SimplyError - stealEmoji | Error: "+e.stack)}})}exports.stealEmoji=stealEmoji;