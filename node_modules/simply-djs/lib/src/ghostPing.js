"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ghostPing=void 0;const discord_js_1=require("discord.js"),error_1=require("./error"),misc_1=require("./misc");
// ------------------------------
// ------ F U N C T I O N -------
// ------------------------------
/**
 * ## ghostPing
 * ### A Great system to see **who ghost pinged**
 *
 * **Important!**: Use it in `messageDelete` event
 *
 * @async
 * @param {Message} message `Message`
 * @param {ghostOptions} options [`ghostOptions`](https://simplyd.js.org/docs/general/ghostPing#ghostoptions)
 * @returns {Promise<User>} [`User`](https://discord.js.org/#/docs/discord.js/stable/class/User)
 *
 * ---
 *
 * @link [`Documentation`](https://simplyd.js.org/docs/general/ghostPing)
 * @example simplydjs.ghostPing(message)
 */
async function ghostPing(message,options={strict:!1}){return new Promise(async resolve=>{if(message.fetch(!0).then(m=>{if(m){if(options.strict)throw new error_1.SimplyError({function:"ghostPing",title:"Use this function in messageDelete event",tip:"We recognised that you are not using this function in messageDelete event."});console.log(`SimplyError - ghostPing | Error: Use this function in messageDelete event

We recognised that you are not using this function in messageDelete event.`)}}).catch(()=>!0),message.mentions.users.first())try{var e;message.author.bot||(message.content.includes(`<@${message.mentions.members.first()?.user.id}>`)||message.content.includes(`<@!${message.mentions.members.first()?.user.id}>`))&&(options.embed||(options.embed={footer:{text:"©️ Rahuletto. npm i simply-djs",iconURL:"https://i.imgur.com/XFUIwPh.png"},color:(0,misc_1.toRgb)("#406DBC")}),e=(new discord_js_1.EmbedBuilder).setAuthor(options.embed?.author||{name:message.author.username,iconURL:message.author.displayAvatarURL({forceStatic:!1})}).setTitle(options.embed?.title||"Ghost Ping").setDescription(options.embed?.description||""+message.author+` **(${message.author.username})** just ghost pinged ${message.mentions.members.first()} **(${message.mentions.users.first().username})**

Content: **${message.content}**`).setColor(options.embed?.color||(0,misc_1.toRgb)("#406DBC")).setFooter(options.embed?.footer||{text:"©️ Rahuletto. npm i simply-djs",iconURL:"https://i.imgur.com/XFUIwPh.png"}).setTimestamp(),options?.embed?.fields&&e.setFields(options.embed?.fields),options?.embed?.author&&e.setAuthor(options.embed?.author),options?.embed?.image&&e.setImage(options.embed?.image),options?.embed?.thumbnail&&e.setThumbnail(options.embed?.thumbnail),options?.embed?.timestamp&&e.setTimestamp(options.embed?.timestamp),options?.embed?.title&&e.setTitle(options.embed?.title),options?.embed?.url&&e.setURL(options.embed?.url),message.channel.send({embeds:[e]}).then(async msg=>{setTimeout(()=>{msg.delete()},(0,misc_1.ms)("20s")),resolve(message.mentions.users.first())}))}catch(e){if(options?.strict)throw new error_1.SimplyError({function:"ghostPing",title:"An Error occured when running the function ",tip:e.stack});console.log("SimplyError - ghostPing | Error: "+e.stack)}})}exports.ghostPing=ghostPing;